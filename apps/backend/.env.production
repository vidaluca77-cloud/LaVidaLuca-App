# Production Environment Configuration for La Vida Luca Backend
# This file documents all production environment variables
# These should be configured in your deployment platform (Render)

# =============================================================================
# CORE ENVIRONMENT SETTINGS
# =============================================================================

# Environment Type
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=WARNING

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Primary Database (PostgreSQL via Render)
# DATABASE_URL=postgresql+asyncpg://user:pass@host:port/database
# This is automatically set by Render from the connected database

# Connection Pool Settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# JWT Configuration
# JWT_SECRET_KEY=auto-generated-by-render
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Trusted Hosts (Security)
TRUSTED_HOSTS=["lavidaluca.fr","*.lavidaluca.fr","lavidaluca-backend.onrender.com"]

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed Origins for Production
CORS_ORIGINS=["https://lavidaluca.fr","https://www.lavidaluca.fr","https://lavidaluca.vercel.app"]
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate Limiting Settings
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_MINUTE_ANONYMOUS=20

# =============================================================================
# EXTERNAL API INTEGRATIONS
# =============================================================================

# OpenAI Configuration (Set manually in Render dashboard)
# OPENAI_API_KEY=your-production-openai-key
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=500

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================

# SMTP Settings (Set manually in Render dashboard if needed)
# SMTP_HOST=your-smtp-host
SMTP_PORT=587
# SMTP_USERNAME=your-smtp-username
# SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=noreply@lavidaluca.fr

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Sentry Configuration (Set manually in Render dashboard)
# SENTRY_DSN=your-production-sentry-dsn
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=1.0.0

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Server Configuration
# PORT is automatically set by Render
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
TIMEOUT=120
KEEPALIVE=5
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100

# =============================================================================
# SECURITY HEADERS & FEATURES
# =============================================================================

# Security Features
SECURITY_HEADERS_ENABLED=true
HTTPS_ONLY=true
SECURE_COOKIES=true

# Content Security Policy
CSP_ENABLED=true
CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature Toggles
ENABLE_API_DOCS=true
ENABLE_METRICS=true
ENABLE_HEALTH_CHECKS=true

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Cache Settings
CACHE_ENABLED=true
CACHE_TTL=300

# =============================================================================
# INSTRUCTIONS FOR DEPLOYMENT
# =============================================================================

# 1. Set these environment variables in your Render dashboard:
#    - JWT_SECRET_KEY (auto-generated)
#    - OPENAI_API_KEY (manual)
#    - SENTRY_DSN (manual)
#    - SMTP_* variables (manual, if email is needed)

# 2. Database URL is automatically configured by Render

# 3. All other variables are set automatically via render.yaml

# 4. Monitor the application health at:
#    https://lavidaluca-backend.onrender.com/health